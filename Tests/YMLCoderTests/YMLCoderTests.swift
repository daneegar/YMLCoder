import XCTest
@testable import YMLCoder

final class YMLCoderTests: XCTestCase {
    
    let sut = """
<?xml version="1.0" encoding="UTF-8"?> <yml_catalog date="2022-08-24T17:24:02+03:00"> <shop> <name>sojetlag.ru</name> <company>sojetlag</company> <url>https://sojetlag.ru</url> <platform>Tilda Publishing</platform> <version>1.0</version> <currencies> <currency id="RUB" rate="1"/> </currencies> <categories> <category id="621640000811">Drop#1</category> <category id="209279633771">Drop#2</category> <category id="307300399391">Unisex</category> <category id="353525165961">NEW</category> <category id="647306409521">Худи</category> <category id="735272810661">Джоггеры</category> <category id="756317833441">Свитшот</category> <category id="267521236281">Верх</category> <category id="944159921161">TOP</category> <category id="457284439601">Брюки и леггинсы</category> <category id="671009354401">Все</category> <category id="655987779751">NEW all</category> <category id="899496574121">Джемперы и лонгсливы</category> <category id="788571986661">Костюмы</category> <category id="548409961451">Рубашки и топы</category> </categories> <offers> <offer id="b8xvroalhhc0hV3CQeT9f3" group_id="153980172961"> <name>Джоггеры Easy, графит - OS - графит(702)</name> <vendorCode>JE2021 702</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild6438-3564-4437-a563-383737656537/IMG_1462.jpg</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-153980172961-dzhoggeri-easy-grafit?editionuid=310561321811</url> <count>2</count> <price>7990.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">графит(702)</param> </offer> <offer id="nH-4rYpIjjZvO4ffqkxW50" group_id="232838230911"> <name>Худи Easy, тофу - OS - тофу(122)</name> <vendorCode>HE2021 122</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом..<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild6139-6165-4539-b638-643931643236/IMG_0677.JPG</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-232838230911-hudi-easy-tofu?editionuid=815434937741</url> <count>6</count> <price>9490.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">тофу(122)</param> </offer> <offer id="zESfhYUVjmwwXDFa2S6Cn3" group_id="921864424111"> <name>Худи Easy, графит - OS - графит(702)</name> <vendorCode>HE2021 702</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild3739-6638-4436-b063-383265366363/IMG_3322.JPG</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-921864424111-hudi-easy-grafit?editionuid=887171063141</url> <count>4</count> <price>9490.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">графит(702)</param> </offer> <offer id="u05vavqLiM3fDcthfds8h0" group_id="595567282801"> <name>Худи Easy, санторини - OS - санторини(430)</name> <vendorCode>HE2021 430</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild6665-6438-4762-b963-613466643737/IMG_0613.jpg</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-595567282801-hudi-easy-santorini?editionuid=199891386941</url> <count>1</count> <price>9490.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">санторини(430)</param> </offer> <offer id="VwyoFe0BjvB0ty9S26xWX3" group_id="502492692671"> <name>Джоггеры Easy, ель - OS - ель(609)</name> <vendorCode>JE2021 609</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild3038-3232-4534-b536-613464306539/28.JPG</picture> <url>https://sojetlag.ru/new/tproduct/472090399-502492692671-dzhoggeri-easy-el?editionuid=876757885261</url> <count>2</count> <price>7990.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">ель(609)</param> </offer> <offer id="rrXKUQLYg-pidNpMuNdem2" group_id="370966803761"> <name>Свитшот Easy, графит - OS - графит(702)</name> <vendorCode>SE2021 702</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild3264-3130-4563-b232-396239363539/IMG_0522.jpg</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-370966803761-svitshot-easy-grafit?editionuid=744402358121</url> <count>2</count> <price>8490.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">графит(702)</param> </offer> <offer id="0FJCmWG7jkfYNH1oZy7ig3" group_id="951077946301"> <name>Свитшот Easy, ель - OS - ель(609)</name> <vendorCode>SE2021 609</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild3138-3464-4466-b735-646534393436/IMG_3197.JPG</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-951077946301-svitshot-easy-el?editionuid=400683813741</url> <count>2</count> <price>8490.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">ель(609)</param> </offer> <offer id="0ruaOC7LjoucQVytcMAMJ2" group_id="473172618321"> <name>Свитшот Easy, тофу - OS - тофу(122)</name> <vendorCode>SE2021 122</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild3630-3331-4165-a265-313364316533/IMG_9613.jpg</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-473172618321-svitshot-easy-tofu?editionuid=423985701951</url> <count>2</count> <price>8490.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">тофу(122)</param> </offer> <offer id="D1ksQRMTjfeG2LXDV1WX92" group_id="503328977011"> <name>Худи Easy, терракот - OS - терракот(802)</name> <vendorCode>HE2021 802</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом..<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild6137-3063-4434-b663-666235633434/IMG_3432.JPG</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-503328977011-hudi-easy-terrakot?editionuid=175968393541</url> <count>1</count> <price>9490.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">терракот(802)</param> </offer> <offer id="iBrY3KhRjRsvDAODZNE751" group_id="120060782281"> <name>Джоггеры Easy, тофу - OS - тофу(122)</name> <vendorCode>JE2021 122</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild3430-3937-4634-b932-663835333963/IMG_0692.JPG</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-120060782281-dzhoggeri-easy-tofu?editionuid=796236082981</url> <count>4</count> <price>7990.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">тофу(122)</param> </offer> <offer id="fcr9ZgYaimMzLLoZPso5r1" group_id="663400399351"> <name>Джоггеры Easy, терракот - OS - терракот(802)</name> <vendorCode>JE2021 802</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild6161-3265-4331-a331-623934633432/IMG_3345.JPG</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-663400399351-dzhoggeri-easy-terrakot?editionuid=909707565621</url> <count>3</count> <price>7990.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">терракот(802)</param> </offer> <offer id="9UwbuYL-g3df3YMZMBmFP2" group_id="835468802721"> <name>Джоггеры Easy, санторини - OS - санторини(430)</name> <vendorCode>JE2021 430</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild3330-3238-4537-a530-666662376166/IMG_4526.jpg</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-835468802721-dzhoggeri-easy-santorini?editionuid=294199427681</url> <count>2</count> <price>7990.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">санторини(430)</param> </offer> <offer id="ORT9e6A1h6Q8Qc3MF65XL0" group_id="879812830451"> <name>Худи Easy, зефир - OS - зефир (303)</name> <vendorCode>HE2021 303</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild6538-6233-4166-b662-336165333064/IMG_2613.JPG</picture> <url>https://sojetlag.ru/tproduct/383675365-879812830451-hudi-easy-zefir?editionuid=228212731621</url> <count>4</count> <price>9490.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">зефир (303)</param> </offer> <offer id="CbEEyQ9ijtXESe3DTrRLM0" group_id="651068354191"> <name>Джоггеры Easy, зефир - OS - зефир (303)</name> <vendorCode>JE2021 303</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild6331-3736-4866-a565-356632666532/IMG_1184.JPG</picture> <url>https://sojetlag.ru/tproduct/383675365-651068354191-dzhoggeri-easy-zefir?editionuid=474312720651</url> <count>5</count> <price>7990.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">зефир (303)</param> </offer> <offer id="onijB0lZhDiEOSHke54D52" group_id="701934518961"> <name>Свитшот Easy, зефир - OS - зефир (303)</name> <vendorCode>SE2021 303</vendorCode> <description> <![CDATA[ Настоящий премиальный оверсайз.<br />Высокое отличительное качество ткани с люксовым велюр эффектом.<br />Идеальная посадка в независимости от типа фигуры за счет продуманного кроя.<br />Подходит на высокий рост. ]]> </description> <picture>https://static.tildacdn.com/tild3437-6264-4430-a130-633661336265/IMG_3531.jpg</picture> <url>https://sojetlag.ru/unisex/tproduct/434054965-701934518961-svitshot-easy-zefir?editionuid=312726357791</url> <count>1</count> <price>8490.00</price> <currencyId>RUB</currencyId> <categoryId>621640000811</categoryId> <param name="размер">OS</param> <param name="цвет">зефир (303)</param> </offer> <offer id="ODXLcr91hioFCru5Woo1s2" group_id="853132786921"> <name>Рашгард Fusion с перьями, черный - OS - черный (900)</name> <vendorCode>RF2022 900</vendorCode> <description> <![CDATA[ Облегающий крой, подчеркивает грудь.<br />Удлиненные рукава с перьями страуса - главный тренд FW21/ SS22 ]]> </description> <picture>https://static.tildacdn.com/tild6463-6261-4434-b430-613638626363/IMG_1175.JPG</picture> <url>https://sojetlag.ru/tproduct/383675365-853132786921-rashgard-fusion-s-peryami-chernii?editionuid=688715260131</url> <count>1</count> <price>5990.00</price> <currencyId>RUB</currencyId> <categoryId>209279633771</categoryId> <param name="размер">OS</param> <param name="цвет">черный (900)</param> </offer> <offer id="00iz1sxLgn6r1mteJjvfc0" group_id="996895389841"> <name>Лонгслив Fusion, небесный - OS - небесный(401)</name> <vendorCode>LF2022 401</vendorCode> <description> <![CDATA[ Комфортный прямой крой, универсальный размер OS.<br />Высокое отличительное качество ткани с бархатистым финишем.<br />Фирменная термопечать "ВСЕЛЕННАЯ БЛАГОВОЛИТ СМЕЛЫМ ДУРАМ" ]]> </description> <picture>https://static.tildacdn.com/tild6461-3031-4763-b434-656338393232/IMG_2799.JPG</picture> <url>https://sojetlag.ru/drop-2/tproduct/434049621-996895389841-longsliv-fusion-nebesnii?editionuid=453391313581</url> <count>4</count> <price>5990.00</price> <currencyId>RUB</currencyId> <categoryId>209279633771</categoryId> <param name="размер">OS</param> <param name="цвет">небесный(401)</param> </offer> <offer id="SAArexDYg54I-3NCUjrFy0" group_id="786774464001"> <name>Леггинсы Fusion с разрезом, черный - OS - черный (900)</name> <vendorCode>LGF2022 900</vendorCode> <description> <![CDATA[ Обладают высокой эластичностью.<br />Отлично формируют и подчеркивают фигуру, зрительно удлиняют ноги.<br />Имеют открытый срез - можно подстроить длину под свой рост. ]]> </description> <picture>https://static.tildacdn.com/tild3037-6466-4430-b737-626361663964/IMG_2995.jpg</picture> <url>https://sojetlag.ru/drop-2/tproduct/434049621-786774464001-legginsi-fusion-s-razrezom-chernii?editionuid=705295815941</url> <count>1</count> <price>5990.00</price> <currencyId>RUB</currencyId> <categoryId>209279633771</categoryId> <param name="размер">OS</param> <param name="цвет">черный (900)</param> </offer> <offer id="rlzDj6swib6evdnc8BJdk1" group_id="691325282421"> <name>Костюм Fusion льняной, туман - OS - туман(301)</name> <vendorCode>SF2022 301</vendorCode> <description> <![CDATA[ Богемный внешний вид.<br />Высокое отличительное качество ткани: натуральный люксовый лен с эффектом мятости.<br />Комфортный расслабленный крой.<br />Увеличенная длина согласно тренда. ]]> </description> <picture>https://static.tildacdn.com/tild3464-3632-4663-a363-613764646632/IMG_7586.JPG</picture> <url>https://sojetlag.ru/new/tproduct/472090399-691325282421-kostyum-fusion-lnyanoi-tuman?editionuid=226284705361</url> <count>1</count> <price>18980.00</price> <currencyId>RUB</currencyId> <categoryId>209279633771</categoryId> <param name="размер">OS</param> <param name="цвет">туман(301)</param> </offer> <offer id="yYSktLD3h5fTzH3eq01zJ3" group_id="799122147711"> <name>Лонгслив Fusion, фуксия - OS - фуксия(350)</name> <vendorCode>LF2022 350</vendorCode> <description> <![CDATA[ Комфортный прямой крой, универсальный размер OS.<br />Высокое отличительное качество ткани с бархатистым финишем.<br />Фирменная термопечать "ВСЕЛЕННАЯ БЛАГОВОЛИТ СМЕЛЫМ ДУРАМ" ]]> </description> <picture>https://static.tildacdn.com/tild3330-6635-4530-b634-616165393465/IMG_5693.jpg</picture> <url>https://sojetlag.ru/new/tproduct/472090399-799122147711-longsliv-fusion-fuksiya?editionuid=903342510601</url> <count>2</count> <price>5990.00</price> <currencyId>RUB</currencyId> <categoryId>209279633771</categoryId> <param name="размер">OS</param> <param name="цвет">фуксия(350)</param> </offer> <offer id="8rgoiiOAihjpYVoM9r8qK2" group_id="385957461231"> <name>Лонгслив Fusion base, полынь - OS - полынь(701)</name> <vendorCode>LF2022b 701</vendorCode> <description> <![CDATA[ Комфортный прямой крой, универсальный размер OS.<br />Высокое отличительное качество ткани с бархатистым финишем. ]]> </description> <picture>https://static.tildacdn.com/tild3564-3562-4866-b338-363031326266/IMG_9954.jpg</picture> <url>https://sojetlag.ru/tproduct/372159620-385957461231-longsliv-fusion-base-polin?editionuid=372277022741</url> <count>1</count> <price>5990.00</price> <currencyId>RUB</currencyId> <categoryId>209279633771</categoryId> <param name="размер">OS</param> <param name="цвет">полынь(701)</param> </offer> </offers> </shop> </yml_catalog>
"""
    
    func testExample() throws {
        let plugin = YMLCoder()
        let decoded = try plugin.decode(rawCatalog: Data(sut.utf8))
        let encoded = try plugin.encode(catalog: decoded)
        let encodedResult = String(data: encoded, encoding: .utf8)
        let reDecoded = try plugin.decode(rawCatalog: encoded)
        let encodedSecond = try plugin.encode(catalog: reDecoded)
        let expressionOne = try XCTUnwrap(encodedResult)
        let expressionTwo = try XCTUnwrap(String(data: encodedSecond, encoding: .utf8))
        XCTAssertEqual(expressionOne, expressionTwo)
    }
}
